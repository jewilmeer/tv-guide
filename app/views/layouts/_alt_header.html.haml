.topbar
  .fill
    .container
      %h3 
        = link_to 'Digital Tv Guide', root_path
      %nav
        %ul.mainmenu
          %li= link_to 'Home', root_path
          %li= link_to 'Guide', guide_programs_path
          %li= link_to 'Programs', :programs
          / %li= link_to 'Programs updates', pages_program_updates_path
          
        = form_tag programs_path, :method => 'get', :id => "programs_search" do
          %input{:type => :text, :placeholder => 'Program name', :name => :q}
          = hidden_field_tag :direction, params[:direction]
          = hidden_field_tag :sort, params[:sort]

        %ul.nav.secondary-nav
          - if current_user
            %li.menu
              = link_to current_user.login.humanize, '#', :class => :menu
              %ul.menu-dropdown
                %li= link_to 'Guide & Programs', [current_user, :programs]
                %li= link_to "Account", edit_user_path(current_user)
                - if current_user.admin?
                  %li.divider
                  %li= link_to "Active admin", active_admin_dashboard_path
                  %li= link_to "Admin", admin_root_path
                %li.divider
                %li= link_to "Logout", logout_path
          - else
            %li= link_to 'Register', signup_path
            %li= link_to 'Login', login_path

            - if current_user
              %li= link_to 'Guide & Programs', [current_user, :programs]
              %li= link_to "Account", edit_user_path(current_user)
              - if current_user.admin?
                %li= link_to "Admin", admin_root_path
              %li= link_to "Logout", logout_path
          